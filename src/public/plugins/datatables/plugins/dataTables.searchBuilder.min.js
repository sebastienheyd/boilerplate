var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.ISOLATE_POLYFILLS=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,i,e){return t==Array.prototype||t==Object.prototype||(t[i]=e.value),t},$jscomp.getGlobal=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var i=0;i<t.length;++i){var e=t[i];if(e&&e.Math==Math)return e}throw Error("Cannot find global object")},$jscomp.global=$jscomp.getGlobal(this),$jscomp.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE,$jscomp.polyfills={},$jscomp.propertyToPolyfillSymbol={},$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(t,i){var e=$jscomp.propertyToPolyfillSymbol[i];return null==e?t[i]:void 0!==(e=t[e])?e:t[i]};$jscomp.polyfill=function(t,i,e,n){i&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(t,i,e,n):$jscomp.polyfillUnisolated(t,i,e,n))},$jscomp.polyfillUnisolated=function(t,i,e,n){for(e=$jscomp.global,t=t.split("."),n=0;n<t.length-1;n++){var s=t[n];if(!(s in e))return;e=e[s]}(i=i(n=e[t=t[t.length-1]]))!=n&&null!=i&&$jscomp.defineProperty(e,t,{configurable:!0,writable:!0,value:i})},$jscomp.polyfillIsolated=function(t,i,e,n){var s=t.split(".");t=1===s.length,n=s[0],n=!t&&n in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var o=0;o<s.length-1;o++){var r=s[o];if(!(r in n))return;n=n[r]}s=s[s.length-1],null!=(i=i(e=$jscomp.IS_SYMBOL_NATIVE&&"es6"===e?n[s]:null))&&(t?$jscomp.defineProperty($jscomp.polyfills,s,{configurable:!0,writable:!0,value:i}):i!==e&&($jscomp.propertyToPolyfillSymbol[s]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(s):$jscomp.POLYFILL_PREFIX+s,s=$jscomp.propertyToPolyfillSymbol[s],$jscomp.defineProperty(n,s,{configurable:!0,writable:!0,value:i})))},$jscomp.polyfill("Object.is",(function(t){return t||function(t,i){return t===i?0!==t||1/t==1/i:t!=t&&i!=i}}),"es6","es3"),$jscomp.polyfill("Array.prototype.includes",(function(t){return t||function(t,i){var e=this;e instanceof String&&(e=String(e));var n=e.length;for(0>(i=i||0)&&(i=Math.max(i+n,0));i<n;i++){var s=e[i];if(s===t||Object.is(s,t))return!0}return!1}}),"es7","es3"),$jscomp.checkStringArgs=function(t,i,e){if(null==t)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(i instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return t+""},$jscomp.polyfill("String.prototype.includes",(function(t){return t||function(t,i){return-1!==$jscomp.checkStringArgs(this,t,"includes").indexOf(t,i||0)}}),"es6","es3"),$jscomp.arrayIteratorImpl=function(t){var i=0;return function(){return i<t.length?{done:!1,value:t[i++]}:{done:!0}}},$jscomp.arrayIterator=function(t){return{next:$jscomp.arrayIteratorImpl(t)}},$jscomp.initSymbol=function(){},$jscomp.polyfill("Symbol",(function(t){if(t)return t;var i=function(t,i){this.$jscomp$symbol$id_=t,$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:i})};i.prototype.toString=function(){return this.$jscomp$symbol$id_};var e=0,n=function(t){if(this instanceof n)throw new TypeError("Symbol is not a constructor");return new i("jscomp_symbol_"+(t||"")+"_"+e++,t)};return n}),"es6","es3"),$jscomp.initSymbolIterator=function(){},$jscomp.polyfill("Symbol.iterator",(function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),e=0;e<i.length;e++){var n=$jscomp.global[i[e]];"function"==typeof n&&"function"!=typeof n.prototype[t]&&$jscomp.defineProperty(n.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return t}),"es6","es3"),$jscomp.initSymbolAsyncIterator=function(){},$jscomp.iteratorPrototype=function(t){return(t={next:t})[Symbol.iterator]=function(){return this},t},$jscomp.iteratorFromArray=function(t,i){t instanceof String&&(t+="");var e=0,n={next:function(){if(e<t.length){var s=e++;return{value:i(s,t[s]),done:!1}}return n.next=function(){return{done:!0,value:void 0}},n.next()}};return n[Symbol.iterator]=function(){return n},n},$jscomp.polyfill("Array.prototype.keys",(function(t){return t||function(){return $jscomp.iteratorFromArray(this,(function(t){return t}))}}),"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",(function(t){return t||function(t,i){var e=$jscomp.checkStringArgs(this,t,"startsWith");t+="";var n=e.length,s=t.length;i=Math.max(0,Math.min(0|i,e.length));for(var o=0;o<s&&i<n;)if(e[i++]!=t[o++])return!1;return o>=s}}),"es6","es3"),$jscomp.polyfill("String.prototype.endsWith",(function(t){return t||function(t,i){var e=$jscomp.checkStringArgs(this,t,"endsWith");t+="",void 0===i&&(i=e.length),i=Math.max(0,Math.min(0|i,e.length));for(var n=t.length;0<n&&0<i;)if(e[--i]!=t[--n])return!1;return 0>=n}}),"es6","es3"),function(){var t,i,e,n,s,o,r,a=window.moment,d=window.luxon,l=function(){function e(n,s,o,r,a){var d=this;if(void 0===r&&(r=0),void 0===a&&(a=1),!i||!i.versionCheck||!i.versionCheck("1.10.0"))throw Error("SearchPane requires DataTables 1.10 or newer");if(this.classes=t.extend(!0,{},e.classes),this.c=t.extend(!0,{},e.defaults,t.fn.dataTable.ext.searchBuilder,s),s=this.c.i18n,this.s={condition:void 0,conditions:{},data:void 0,dataIdx:-1,dataPoints:[],dateFormat:!1,depth:a,dt:n,filled:!1,index:r,origData:void 0,topGroup:o,type:"",value:[]},this.dom={buttons:t("<div/>").addClass(this.classes.buttonContainer),condition:t("<select disabled/>").addClass(this.classes.condition).addClass(this.classes.dropDown).addClass(this.classes.italic).attr("autocomplete","hacking"),conditionTitle:t('<option value="" disabled selected hidden/>').text(this.s.dt.i18n("searchBuilder.condition",s.condition)),container:t("<div/>").addClass(this.classes.container),data:t("<select/>").addClass(this.classes.data).addClass(this.classes.dropDown).addClass(this.classes.italic),dataTitle:t('<option value="" disabled selected hidden/>').text(this.s.dt.i18n("searchBuilder.data",s.data)),defaultValue:t("<select disabled/>").addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.select),delete:t("<button>&times</button>").addClass(this.classes.delete).addClass(this.classes.button).attr("title",this.s.dt.i18n("searchBuilder.deleteTitle",s.deleteTitle)).attr("type","button"),left:t("<button><</button>").addClass(this.classes.left).addClass(this.classes.button).attr("title",this.s.dt.i18n("searchBuilder.leftTitle",s.leftTitle)).attr("type","button"),right:t("<button>></button>").addClass(this.classes.right).addClass(this.classes.button).attr("title",this.s.dt.i18n("searchBuilder.rightTitle",s.rightTitle)).attr("type","button"),value:[t("<select disabled/>").addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.italic).addClass(this.classes.select)],valueTitle:t('<option value="--valueTitle--" selected/>').text(this.s.dt.i18n("searchBuilder.value",s.value))},this.c.greyscale)for(this.dom.data.addClass(this.classes.greyscale),this.dom.condition.addClass(this.classes.greyscale),this.dom.defaultValue.addClass(this.classes.greyscale),n=0,o=this.dom.value;n<o.length;n++)o[n].addClass(this.classes.greyscale);return this.s.dt.on("draw.dtsp",(function(){d._adjustCriteria()})),this.s.dt.on("buttons-action",(function(){d._adjustCriteria()})),t(window).on("resize.dtsp",i.util.throttle((function(){d._adjustCriteria()}))),this._buildCriteria(),this}return e.prototype.updateArrows=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!0),this.dom.container.children().detach(),this.dom.container.append(this.dom.data).append(this.dom.condition).append(this.dom.value[0]),this.setListeners(),void 0!==this.dom.value[0]&&this.dom.value[0].trigger("dtsb-inserted");for(var e=1;e<this.dom.value.length;e++)this.dom.container.append(this.dom.value[e]),this.dom.value[e].trigger("dtsb-inserted");1<this.s.depth&&this.dom.buttons.append(this.dom.left),(!1===this.c.depthLimit||this.s.depth<this.c.depthLimit)&&t?this.dom.buttons.append(this.dom.right):this.dom.right.remove(),this.dom.buttons.append(this.dom.delete),this.dom.container.append(this.dom.buttons),i&&this._adjustCriteria()},e.prototype.destroy=function(){this.dom.data.off(".dtsb"),this.dom.condition.off(".dtsb"),this.dom.delete.off(".dtsb");for(var t=0,i=this.dom.value;t<i.length;t++)i[t].off(".dtsb");this.dom.container.remove()},e.prototype.search=function(t,i){var e=this.s.conditions[this.s.condition];if(void 0!==this.s.condition&&void 0!==e){var n=t[this.s.dataIdx];if(this.s.type.includes("num")&&(""!==this.s.dt.settings()[0].oLanguage.sDecimal||""!==this.s.dt.settings()[0].oLanguage.sThousands)){if(n=[t[this.s.dataIdx]],""!==this.s.dt.settings()[0].oLanguage.sDecimal&&(n=t[this.s.dataIdx].split(this.s.dt.settings()[0].oLanguage.sDecimal)),""!==this.s.dt.settings()[0].oLanguage.sThousands)for(t=0;t<n.length;t++)n[t]=n[t].replace(this.s.dt.settings()[0].oLanguage.sThousands,",");n=n.join(".")}if("filter"!==this.c.orthogonal.search&&(n=(n=this.s.dt.settings()[0]).oApi._fnGetCellData(n,i,this.s.dataIdx,"string"==typeof this.c.orthogonal?this.c.orthogonal:this.c.orthogonal.search)),"array"===this.s.type)for(Array.isArray(n)||(n=[n]),n.sort(),i=0,t=n;i<t.length;i++){var s=t[i];s&&s.replace(/[\r\n\u2028]/g," ")}else null!==n&&(n=n.replace(/[\r\n\u2028]/g," "));return this.s.type.includes("html")&&(n=n.replace(/(<([^>]+)>)/gi,"")),null===n&&(n=""),e.search(n,this.s.value,this)}},e.prototype.getDetails=function(t){if(void 0===t&&(t=!1),this.s.value,null===this.s.type||!this.s.type.includes("num")||""===this.s.dt.settings()[0].oLanguage.sDecimal&&""===this.s.dt.settings()[0].oLanguage.sThousands){if(null!==this.s.type&&t)if(this.s.type.includes("date")||this.s.type.includes("time"))for(t=0;t<this.s.value.length;t++)null===this.s.value[t].match(/^\d{4}-([0]\d|1[0-2])-([0-2]\d|3[01])$/g)&&(this.s.value[t]="");else if(this.s.type.includes("moment"))for(t=0;t<this.s.value.length;t++)this.s.value[t]=a(this.s.value[t],this.s.dateFormat).toISOString();else if(this.s.type.includes("luxon"))for(t=0;t<this.s.value.length;t++)this.s.value[t]=d.DateTime.fromFormat(this.s.value[t],this.s.dateFormat).toISO()}else for(t=0;t<this.s.value.length;t++){var i=[this.s.value[t].toString()];if(""!==this.s.dt.settings()[0].oLanguage.sDecimal&&(i=this.s.value[t].split(this.s.dt.settings()[0].oLanguage.sDecimal)),""!==this.s.dt.settings()[0].oLanguage.sThousands)for(var e=0;e<i.length;e++)i[e]=i[e].replace(this.s.dt.settings()[0].oLanguage.sThousands,",");this.s.value[t]=i.join(".")}if(this.s.type.includes("num")&&this.s.dt.page.info().serverSide)for(t=0;t<this.s.value.length;t++)this.s.value[t]=this.s.value[t].replace(/[^0-9.]/g,"");return{condition:this.s.condition,data:this.s.data,origData:this.s.origData,type:this.s.type,value:this.s.value.map((function(t){return t.toString()}))}},e.prototype.getNode=function(){return this.dom.container},e.prototype.populate=function(){this._populateData(),-1!==this.s.dataIdx&&(this._populateCondition(),void 0!==this.s.condition&&this._populateValue())},e.prototype.rebuild=function(i){var e,n=!1;if(this._populateData(),void 0!==i.data){var s=this.classes.italic,o=this.dom.data;this.dom.data.children("option").each((function(){t(this).text()===i.data?(t(this).prop("selected",!0),o.removeClass(s),n=!0,e=t(this).val()):t(this).removeProp("selected")}))}if(n){this.s.data=i.data,this.s.origData=i.origData,this.s.dataIdx=e,this.c.orthogonal=this._getOptions().orthogonal,this.dom.dataTitle.remove(),this._populateCondition(),this.dom.conditionTitle.remove();for(var r=void 0,a=this.dom.condition.children("option"),d=0;d<a.length;d++){var l=t(a[d]);void 0!==i.condition&&l.val()===i.condition&&"string"==typeof i.condition?(l.prop("selected",!0),r=l.val()):l.removeProp("selected")}if(this.s.condition=r,void 0!==this.s.condition){for(this.dom.conditionTitle.removeProp("selected"),this.dom.conditionTitle.remove(),this.dom.condition.removeClass(this.classes.italic),d=0;d<a.length;d++)(l=t(a[d])).val()!==this.s.condition&&l.removeProp("selected"),l.prop("selected");this._populateValue(i)}else this.dom.conditionTitle.prependTo(this.dom.condition).prop("selected",!0)}},e.prototype.setListeners=function(){var i=this;this.dom.data.unbind("change").on("change",(function(){i.dom.dataTitle.removeProp("selected");for(var e=i.dom.data.children("option."+i.classes.option),n=0;n<e.length;n++){var s=t(e[n]);s.val()===i.dom.data.val()?(i.dom.data.removeClass(i.classes.italic),s.prop("selected",!0),i.s.dataIdx=+s.val(),i.s.data=s.text(),i.s.origData=s.prop("origData"),i.c.orthogonal=i._getOptions().orthogonal,i._clearCondition(),i._clearValue(),i._populateCondition(),i.s.filled&&(i.s.filled=!1,i.s.dt.draw(),i.setListeners()),i.s.dt.state.save()):s.removeProp("selected")}})),this.dom.condition.unbind("change").on("change",(function(){i.dom.conditionTitle.removeProp("selected");for(var e=i.dom.condition.children("option."+i.classes.option),n=0;n<e.length;n++){var s=t(e[n]);if(s.val()===i.dom.condition.val()){i.dom.condition.removeClass(i.classes.italic),s.prop("selected",!0),s=s.val();for(var o=0,r=Object.keys(i.s.conditions);o<r.length;o++)if(r[o]===s){i.s.condition=s;break}for(i._clearValue(),i._populateValue(),s=0,o=i.dom.value;s<o.length;s++)r=o[s],i.s.filled&&void 0!==r&&0!==i.dom.container.has(r[0]).length&&(i.s.filled=!1,i.s.dt.draw(),i.setListeners());(0===i.dom.value.length||1===i.dom.value.length&&void 0===i.dom.value[0])&&i.s.dt.draw()}else s.removeProp("selected")}}))},e.prototype._adjustCriteria=function(){if(0!==t(document).has(this.dom.container).length){var i=this.dom.value[this.dom.value.length-1];if(void 0!==i&&0!==this.dom.container.has(i[0]).length){var e=i.outerWidth(!0);i=i.offset().left+e;var n=this.dom.left.offset(),s=this.dom.right.offset(),o=this.dom.delete.offset(),r=0!==this.dom.container.has(this.dom.left[0]).length,a=0!==this.dom.container.has(this.dom.right[0]).length,d=r?n.left:a?s.left:o.left;(15>d-i||r&&n.top!==o.top||a&&s.top!==o.top)&&!this.dom.container.parent().hasClass(this.classes.vertical)?(this.dom.container.parent().addClass(this.classes.vertical),this.s.topGroup.trigger("dtsb-redrawContents")):15<d-(this.dom.data.offset().left+this.dom.data.outerWidth(!0)+this.dom.condition.outerWidth(!0)+e)&&this.dom.container.parent().hasClass(this.classes.vertical)&&(this.dom.container.parent().removeClass(this.classes.vertical),this.s.topGroup.trigger("dtsb-redrawContents"))}}},e.prototype._buildCriteria=function(){this.dom.data.append(this.dom.dataTitle),this.dom.condition.append(this.dom.conditionTitle),this.dom.container.append(this.dom.data).append(this.dom.condition);for(var t=0,i=this.dom.value;t<i.length;t++){var e=i[t];e.append(this.dom.valueTitle),this.dom.container.append(e)}this.dom.container.append(this.dom.delete).append(this.dom.right),this.setListeners()},e.prototype._clearCondition=function(){this.dom.condition.empty(),this.dom.conditionTitle.prop("selected",!0).attr("disabled","true"),this.dom.condition.prepend(this.dom.conditionTitle).prop("selectedIndex",0),this.s.conditions={},this.s.condition=void 0},e.prototype._clearValue=function(){if(void 0!==this.s.condition){if(0<this.dom.value.length&&void 0!==this.dom.value[0])for(var i=function(t){void 0!==t&&setTimeout((function(){t.remove()}),50)},n=0,s=this.dom.value;n<s.length;n++){var o=s[n];i(o)}if(this.dom.value=[].concat(this.s.conditions[this.s.condition].init(this,e.updateListener)),0<this.dom.value.length&&void 0!==this.dom.value[0])for(this.dom.value[0].insertAfter(this.dom.condition).trigger("dtsb-inserted"),o=1;o<this.dom.value.length;o++)this.dom.value[o].insertAfter(this.dom.value[o-1]).trigger("dtsb-inserted")}else{for(i=function(t){void 0!==t&&setTimeout((function(){t.remove()}),50)},n=0,s=this.dom.value;n<s.length;n++)i(o=s[n]);this.dom.valueTitle.prop("selected",!0),this.dom.defaultValue.append(this.dom.valueTitle).insertAfter(this.dom.condition)}this.s.value=[],this.dom.value=[t("<select disabled/>").addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.italic).addClass(this.classes.select).append(this.dom.valueTitle.clone())]},e.prototype._getOptions=function(){return t.extend(!0,{},e.defaults,this.s.dt.settings()[0].aoColumns[this.s.dataIdx].searchBuilder)},e.prototype._populateCondition=function(){var i=[],n=Object.keys(this.s.conditions).length;if(0===n){n=+this.dom.data.children("option:selected").val(),this.s.type=this.s.dt.columns().type().toArray()[n];var s=this.s.dt.settings()[0].aoColumns;void 0!==s&&(void 0!==(s=s[n]).searchBuilderType&&null!==s.searchBuilderType?this.s.type=s.searchBuilderType:void 0!==this.s.type&&null!==this.s.type||(this.s.type=s.sType)),null!==this.s.type&&void 0!==this.s.type||(t.fn.dataTable.ext.oApi._fnColumnTypes(this.s.dt.settings()[0]),this.s.type=this.s.dt.columns().type().toArray()[n]),this.dom.condition.removeAttr("disabled").empty().append(this.dom.conditionTitle).addClass(this.classes.italic),this.dom.conditionTitle.prop("selected",!0),""!==(n=this.s.dt.settings()[0].oLanguage.sDecimal)&&this.s.type.indexOf(n)===this.s.type.length-n.length&&(this.s.type.includes("num-fmt")||this.s.type.includes("num"))&&(this.s.type=this.s.type.replace(n,""));var o=void 0!==this.c.conditions[this.s.type]?this.c.conditions[this.s.type]:this.s.type.includes("moment")?this.c.conditions.moment:this.s.type.includes("luxon")?this.c.conditions.luxon:this.c.conditions.string;this.s.type.includes("moment")?this.s.dateFormat=this.s.type.replace(/moment-/g,""):this.s.type.includes("luxon")&&(this.s.dateFormat=this.s.type.replace(/luxon-/g,""));for(var r=0,a=Object.keys(o);r<a.length;r++)null!==o[s=a[r]]&&(this.s.dt.page.info().serverSide&&o[s].init===e.initSelect&&(o[s].init=e.initInput,o[s].inputValue=e.inputValueInput,o[s].isInputValid=e.isInputValidInput),this.s.conditions[s]=o[s],"function"==typeof(n=o[s].conditionName)&&(n=n(this.s.dt,this.c.i18n)),i.push(t("<option>",{text:n,value:s}).addClass(this.classes.option).addClass(this.classes.notItalic)))}else{if(!(0<n))return void this.dom.condition.attr("disabled","true").addClass(this.classes.italic);for(this.dom.condition.empty().removeAttr("disabled").addClass(this.classes.italic),o=0,r=Object.keys(this.s.conditions);o<r.length;o++)s=r[o],"function"==typeof(n=this.s.conditions[s].conditionName)&&(n=n(this.s.dt,this.c.i18n)),s=t("<option>",{text:n,value:s}).addClass(this.classes.option).addClass(this.classes.notItalic),void 0!==this.s.condition&&this.s.condition===n&&(s.prop("selected",!0),this.dom.condition.removeClass(this.classes.italic)),i.push(s)}for(n=0;n<i.length;n++)this.dom.condition.append(i[n]);this.dom.condition.prop("selectedIndex",0)},e.prototype._populateData=function(){var i=this;if(this.dom.data.empty().append(this.dom.dataTitle),0===this.s.dataPoints.length)this.s.dt.columns().every((function(e){if(!0===i.c.columns||i.s.dt.columns(i.c.columns).indexes().toArray().includes(e)){for(var n=!1,s=0,o=i.s.dataPoints;s<o.length;s++)if(o[s].index===e){n=!0;break}n||(e={index:e,origData:(n=i.s.dt.settings()[0].aoColumns[e]).data,text:(void 0===n.searchBuilderTitle?n.sTitle:n.searchBuilderTitle).replace(/(<([^>]+)>)/gi,"")},i.s.dataPoints.push(e),i.dom.data.append(t("<option>",{text:e.text,value:e.index}).addClass(i.classes.option).addClass(i.classes.notItalic).prop("origData",n.data).prop("selected",i.s.dataIdx===e.index)),i.s.dataIdx===e.index&&i.dom.dataTitle.removeProp("selected"))}}));else for(var e=function(e){n.s.dt.columns().every((function(t){var n=i.s.dt.settings()[0].aoColumns[t];(void 0===n.searchBuilderTitle?n.sTitle:n.searchBuilderTitle).replace(/(<([^>]+)>)/gi,"")===e.text&&(e.index=t,e.origData=n.data)}));var s=t("<option>",{text:e.text.replace(/(<([^>]+)>)/gi,""),value:e.index}).addClass(n.classes.option).addClass(n.classes.notItalic).prop("origData",e.origData);n.s.data===e.text&&(n.s.dataIdx=e.index,n.dom.dataTitle.removeProp("selected"),s.prop("selected",!0),n.dom.data.removeClass(n.classes.italic)),n.dom.data.append(s)},n=this,s=0,o=this.s.dataPoints;s<o.length;s++)e(o[s])},e.prototype._populateValue=function(i){var n=this,s=this.s.filled;this.s.filled=!1,setTimeout((function(){n.dom.defaultValue.remove()}),50);for(var o=function(t){setTimeout((function(){void 0!==t&&t.remove()}),50)},r=0,a=this.dom.value;r<a.length;r++)o(a[r]);if(3<(o=this.dom.container.children()).length)for(r=2;r<o.length-1;r++)t(o[r]).remove();for(void 0!==i&&this.s.dt.columns().every((function(t){n.s.dt.settings()[0].aoColumns[t].sTitle===i.data&&(n.s.dataIdx=t)})),this.dom.value=[].concat(this.s.conditions[this.s.condition].init(this,e.updateListener,void 0!==i?i.value:void 0)),void 0!==i&&void 0!==i.value&&(this.s.value=i.value),void 0!==this.dom.value[0]&&this.dom.value[0].insertAfter(this.dom.condition).trigger("dtsb-inserted"),r=1;r<this.dom.value.length;r++)this.dom.value[r].insertAfter(this.dom.value[r-1]).trigger("dtsb-inserted");this.s.filled=this.s.conditions[this.s.condition].isInputValid(this.dom.value,this),this.setListeners(),s!==this.s.filled&&(this.s.dt.draw(),this.setListeners())},e.prototype._throttle=function(t,i){void 0===i&&(i=200);var e=null,n=null,s=this;return null===i&&(i=200),function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];r=+new Date,null!==e&&r<e+i?clearTimeout(n):e=r,n=setTimeout((function(){e=null,t.apply(s,o)}),i)}},e.version="1.1.0",e.classes={button:"dtsb-button",buttonContainer:"dtsb-buttonContainer",condition:"dtsb-condition",container:"dtsb-criteria",data:"dtsb-data",delete:"dtsb-delete",dropDown:"dtsb-dropDown",greyscale:"dtsb-greyscale",input:"dtsb-input",italic:"dtsb-italic",joiner:"dtsp-joiner",left:"dtsb-left",notItalic:"dtsb-notItalic",option:"dtsb-option",right:"dtsb-right",select:"dtsb-select",value:"dtsb-value",vertical:"dtsb-vertical"},e.initSelect=function(i,n,s,o){void 0===s&&(s=null),void 0===o&&(o=!1);var r=i.dom.data.children("option:selected").val(),a=i.s.dt.rows().indexes().toArray(),d=i.s.dt.settings()[0],l=t("<select/>").addClass(e.classes.value).addClass(e.classes.dropDown).addClass(e.classes.italic).addClass(e.classes.select).append(i.dom.valueTitle).on("change",(function(){t(this).removeClass(e.classes.italic),n(i,this)}));i.c.greyscale&&l.addClass(e.classes.greyscale);for(var u=[],c=[],h=0;h<a.length;h++){var p=a[h],f=d.oApi._fnGetCellData(d,p,r,"string"==typeof i.c.orthogonal?i.c.orthogonal:i.c.orthogonal.search);f="string"==typeof f?f.replace(/[\r\n\u2028]/g," "):f,p=d.oApi._fnGetCellData(d,p,r,"string"==typeof i.c.orthogonal?i.c.orthogonal:i.c.orthogonal.display),"array"===i.s.type&&(f=Array.isArray(f)?f=f.sort():[f],p=Array.isArray(p)?p=p.sort():[p]);var m=function(n,o){n=t("<option>",{type:Array.isArray(n)?"Array":"String",value:i.s.type.includes("html")&&null!==n&&"string"==typeof n?n.replace(/(<([^>]+)>)/gi,""):n}).addClass(i.classes.option).addClass(i.classes.notItalic).html("string"==typeof o?o.replace(/(<([^>]+)>)/gi,""):o),o=n.val(),-1===u.indexOf(o)&&(u.push(o),c.push(n),null!==s&&Array.isArray(s[0])&&(s[0]=s[0].sort().join(",")),null!==s&&n.val()===s[0]&&(n.prop("selected",!0),l.removeClass(e.classes.italic)))};if(o)for(var g=0;g<f.length;g++)m(f[g],p[g]);else m(f,p)}for(c.sort((function(t,e){return"array"===i.s.type||"string"===i.s.type||"html"===i.s.type?t.val()<e.val()?-1:t.val()>e.val()?1:0:"num"===i.s.type||"html-num"===i.s.type?+t.val().replace(/(<([^>]+)>)/gi,"")<+e.val().replace(/(<([^>]+)>)/gi,"")?-1:+t.val().replace(/(<([^>]+)>)/gi,"")>+e.val().replace(/(<([^>]+)>)/gi,"")?1:0:"num-fmt"===i.s.type||"html-num-fmt"===i.s.type?+t.val().replace(/[^0-9.]/g,"")<+e.val().replace(/[^0-9.]/g,"")?-1:+t.val().replace(/[^0-9.]/g,"")>+e.val().replace(/[^0-9.]/g,"")?1:0:void 0})),o=0;o<c.length;o++)l.append(c[o]);return l},e.initSelectArray=function(t,i,n){return void 0===n&&(n=null),e.initSelect(t,i,n,!0)},e.initInput=function(i,n,s){void 0===s&&(s=null);var o=i.s.dt.settings()[0].searchDelay;return o=t("<input/>").addClass(e.classes.value).addClass(e.classes.input).on("input keypress",i._throttle((function(t){if(t=t.keyCode||t.which,!(i.c.enterSearch||void 0!==i.s.dt.settings()[0].oInit.search&&i.s.dt.settings()[0].oInit.search.return)||13===t)return n(i,this)}),null===o?100:o)),i.c.greyscale&&o.addClass(e.classes.greyscale),null!==s&&o.val(s[0]),i.s.dt.one("draw",(function(){i.s.topGroup.trigger("dtsb-redrawLogic")})),o},e.init2Input=function(i,n,s){void 0===s&&(s=null);var o=i.s.dt.settings()[0].searchDelay;return o=[t("<input/>").addClass(e.classes.value).addClass(e.classes.input).on("input keypress",i._throttle((function(t){if(t=t.keyCode||t.which,!(i.c.enterSearch||void 0!==i.s.dt.settings()[0].oInit.search&&i.s.dt.settings()[0].oInit.search.return)||13===t)return n(i,this)}),null===o?100:o)),t("<span>").addClass(i.classes.joiner).text(i.s.dt.i18n("searchBuilder.valueJoiner",i.c.i18n.valueJoiner)),t("<input/>").addClass(e.classes.value).addClass(e.classes.input).on("input keypress",i._throttle((function(t){if(t=t.keyCode||t.which,!(i.c.enterSearch||void 0!==i.s.dt.settings()[0].oInit.search&&i.s.dt.settings()[0].oInit.search.return)||13===t)return n(i,this)}),null===o?100:o))],i.c.greyscale&&(o[0].addClass(e.classes.greyscale),o[2].addClass(e.classes.greyscale)),null!==s&&(o[0].val(s[0]),o[2].val(s[1])),i.s.dt.one("draw",(function(){i.s.topGroup.trigger("dtsb-redrawLogic")})),o},e.initDate=function(i,n,s){void 0===s&&(s=null);var o=i.s.dt.settings()[0].searchDelay,r=t("<input/>").addClass(e.classes.value).addClass(e.classes.input).dtDateTime({attachTo:"input",format:i.s.dateFormat?i.s.dateFormat:void 0}).on("change",i._throttle((function(){return n(i,this)}),null===o?100:o)).on("input keypress",i.c.enterSearch||void 0!==i.s.dt.settings()[0].oInit.search&&i.s.dt.settings()[0].oInit.search.return?function(t){i._throttle((function(){if(13===(t.keyCode||t.which))return n(i,this)}),null===o?100:o)}:i._throttle((function(){return n(i,this)}),null===o?100:o));return i.c.greyscale&&r.addClass(e.classes.greyscale),null!==s&&r.val(s[0]),i.s.dt.one("draw",(function(){i.s.topGroup.trigger("dtsb-redrawLogic")})),r},e.initNoValue=function(t){t.s.dt.one("draw",(function(){t.s.topGroup.trigger("dtsb-redrawLogic")}))},e.init2Date=function(i,n,s){var o=this;void 0===s&&(s=null);var r=i.s.dt.settings()[0].searchDelay;return r=[t("<input/>").addClass(e.classes.value).addClass(e.classes.input).dtDateTime({attachTo:"input",format:i.s.dateFormat?i.s.dateFormat:void 0}).on("change",null!==r?i.s.dt.settings()[0].oApi._fnThrottle((function(){return n(i,this)}),r):function(){n(i,o)}).on("input keypress",i.c.enterSearch||void 0!==i.s.dt.settings()[0].oInit.search&&i.s.dt.settings()[0].oInit.search.return||null===r?i.c.enterSearch||void 0!==i.s.dt.settings()[0].oInit.search&&i.s.dt.settings()[0].oInit.search.return?function(t){13===(t.keyCode||t.which)&&n(i,o)}:function(){n(i,o)}:i.s.dt.settings()[0].oApi._fnThrottle((function(){return n(i,this)}),r)),t("<span>").addClass(i.classes.joiner).text(i.s.dt.i18n("searchBuilder.valueJoiner",i.c.i18n.valueJoiner)),t("<input/>").addClass(e.classes.value).addClass(e.classes.input).dtDateTime({attachTo:"input",format:i.s.dateFormat?i.s.dateFormat:void 0}).on("change",null!==r?i.s.dt.settings()[0].oApi._fnThrottle((function(){return n(i,this)}),r):function(){n(i,o)}).on("input keypress",i.c.enterSearch||void 0!==i.s.dt.settings()[0].oInit.search&&i.s.dt.settings()[0].oInit.search.return||null===r?i.c.enterSearch||void 0!==i.s.dt.settings()[0].oInit.search&&i.s.dt.settings()[0].oInit.search.return?function(t){13===(t.keyCode||t.which)&&n(i,o)}:function(){n(i,o)}:i.s.dt.settings()[0].oApi._fnThrottle((function(){return n(i,this)}),r))],i.c.greyscale&&(r[0].addClass(e.classes.greyscale),r[2].addClass(e.classes.greyscale)),null!==s&&0<s.length&&(r[0].val(s[0]),r[2].val(s[1])),i.s.dt.one("draw",(function(){i.s.topGroup.trigger("dtsb-redrawLogic")})),r},e.isInputValidSelect=function(t){for(var i=!0,n=0;n<t.length;n++){var s=t[n];s.children("option:selected").length===s.children("option").length-s.children("option."+e.classes.notItalic).length&&1===s.children("option:selected").length&&s.children("option:selected")[0]===s.children("option:hidden")[0]&&(i=!1)}return i},e.isInputValidInput=function(t){for(var i=!0,e=0;e<t.length;e++){var n=t[e];n.is("input")&&0===n.val().length&&(i=!1)}return i},e.inputValueSelect=function(t){for(var i=[],e=0;e<t.length;e++){var n=t[e];if(n.is("select")){var s=n.children("option:selected").val();i.push("Array"===n.children("option:selected").attr("type")?s.split(",").sort():s)}}return i},e.inputValueInput=function(t){for(var i=[],e=0;e<t.length;e++){var n=t[e];n.is("input")&&i.push(n.val())}return i},e.updateListener=function(t,i){var e=t.s.conditions[t.s.condition];if(t.s.filled=e.isInputValid(t.dom.value,t),t.s.value=e.inputValue(t.dom.value,t),t.s.filled){for(Array.isArray(t.s.value)||(t.s.value=[t.s.value]),e=0;e<t.s.value.length;e++)if(Array.isArray(t.s.value[e]))t.s.value[e].sort();else if(t.s.type.includes("num")&&(""!==t.s.dt.settings()[0].oLanguage.sDecimal||""!==t.s.dt.settings()[0].oLanguage.sThousands)){var n=[t.s.value[e].toString()];if(""!==t.s.dt.settings()[0].oLanguage.sDecimal&&(n=t.s.value[e].split(t.s.dt.settings()[0].oLanguage.sDecimal)),""!==t.s.dt.settings()[0].oLanguage.sThousands)for(var s=0;s<n.length;s++)n[s]=n[s].replace(t.s.dt.settings()[0].oLanguage.sThousands,",");t.s.value[e]=n.join(".")}for(s=n=null,e=0;e<t.dom.value.length;e++)i===t.dom.value[e][0]&&(n=e,void 0!==i.selectionStart&&(s=i.selectionStart));t.s.dt.draw(),null!==n&&(t.dom.value[n].removeClass(t.classes.italic),t.dom.value[n].focus(),null!==s&&t.dom.value[n][0].setSelectionRange(s,s))}else t.s.dt.draw()},e.dateConditions={"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.equals",i.conditions.date.equals)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return(t=t.replace(/(\/|-|,)/g,"-"))===i[0]}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.not",i.conditions.date.not)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return(t=t.replace(/(\/|-|,)/g,"-"))!==i[0]}},"<":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.before",i.conditions.date.before)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return(t=t.replace(/(\/|-|,)/g,"-"))<i[0]}},">":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.after",i.conditions.date.after)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return(t=t.replace(/(\/|-|,)/g,"-"))>i[0]}},between:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.between",i.conditions.date.between)},init:e.init2Date,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return t=t.replace(/(\/|-|,)/g,"-"),i[0]<i[1]?i[0]<=t&&t<=i[1]:i[1]<=t&&t<=i[0]}},"!between":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.notBetween",i.conditions.date.notBetween)},init:e.init2Date,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return t=t.replace(/(\/|-|,)/g,"-"),i[0]<i[1]?!(i[0]<=t&&t<=i[1]):!(i[1]<=t&&t<=i[0])}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.empty",i.conditions.date.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.notEmpty",i.conditions.date.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return!(null==t||0===t.length)}}},e.momentDateConditions={"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.equals",i.conditions.date.equals)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return a(t,e.s.dateFormat).valueOf()===a(i[0],e.s.dateFormat).valueOf()}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.not",i.conditions.date.not)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return a(t,e.s.dateFormat).valueOf()!==a(i[0],e.s.dateFormat).valueOf()}},"<":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.before",i.conditions.date.before)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return a(t,e.s.dateFormat).valueOf()<a(i[0],e.s.dateFormat).valueOf()}},">":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.after",i.conditions.date.after)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return a(t,e.s.dateFormat).valueOf()>a(i[0],e.s.dateFormat).valueOf()}},between:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.between",i.conditions.date.between)},init:e.init2Date,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){t=a(t,e.s.dateFormat).valueOf();var n=a(i[0],e.s.dateFormat).valueOf();return n<(i=a(i[1],e.s.dateFormat).valueOf())?n<=t&&t<=i:i<=t&&t<=n}},"!between":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.notBetween",i.conditions.date.notBetween)},init:e.init2Date,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){t=a(t,e.s.dateFormat).valueOf();var n=a(i[0],e.s.dateFormat).valueOf();return n<(i=a(i[1],e.s.dateFormat).valueOf())?!(+n<=+t&&+t<=+i):!(+i<=+t&&+t<=+n)}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.empty",i.conditions.date.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.notEmpty",i.conditions.date.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return!(null==t||0===t.length)}}},e.luxonDateConditions={"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.equals",i.conditions.date.equals)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return d.DateTime.fromFormat(t,e.s.dateFormat).ts===d.DateTime.fromFormat(i[0],e.s.dateFormat).ts}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.not",i.conditions.date.not)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return d.DateTime.fromFormat(t,e.s.dateFormat).ts!==d.DateTime.fromFormat(i[0],e.s.dateFormat).ts}},"<":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.before",i.conditions.date.before)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return d.DateTime.fromFormat(t,e.s.dateFormat).ts<d.DateTime.fromFormat(i[0],e.s.dateFormat).ts}},">":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.after",i.conditions.date.after)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return d.DateTime.fromFormat(t,e.s.dateFormat).ts>d.DateTime.fromFormat(i[0],e.s.dateFormat).ts}},between:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.between",i.conditions.date.between)},init:e.init2Date,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){t=d.DateTime.fromFormat(t,e.s.dateFormat).ts;var n=d.DateTime.fromFormat(i[0],e.s.dateFormat).ts;return n<(i=d.DateTime.fromFormat(i[1],e.s.dateFormat).ts)?n<=t&&t<=i:i<=t&&t<=n}},"!between":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.notBetween",i.conditions.date.notBetween)},init:e.init2Date,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){t=d.DateTime.fromFormat(t,e.s.dateFormat).ts;var n=d.DateTime.fromFormat(i[0],e.s.dateFormat).ts;return n<(i=d.DateTime.fromFormat(i[1],e.s.dateFormat).ts)?!(+n<=+t&&+t<=+i):!(+i<=+t&&+t<=+n)}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.empty",i.conditions.date.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.notEmpty",i.conditions.date.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return!(null==t||0===t.length)}}},e.numConditions={"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.equals",i.conditions.number.equals)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){return+t==+i[0]}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.not",i.conditions.number.not)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){return+t!=+i[0]}},"<":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.lt",i.conditions.number.lt)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+t<+i[0]}},"<=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.lte",i.conditions.number.lte)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+t<=+i[0]}},">=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.gte",i.conditions.number.gte)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+t>=+i[0]}},">":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.gt",i.conditions.number.gt)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+t>+i[0]}},between:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.between",i.conditions.number.between)},init:e.init2Input,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+i[0]<+i[1]?+i[0]<=+t&&+t<=+i[1]:+i[1]<=+t&&+t<=+i[0]}},"!between":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.notBetween",i.conditions.number.notBetween)},init:e.init2Input,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+i[0]<+i[1]?!(+i[0]<=+t&&+t<=+i[1]):!(+i[1]<=+t&&+t<=+i[0])}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.empty",i.conditions.number.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.notEmpty",i.conditions.number.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return!(null==t||0===t.length)}}},e.numFmtConditions={"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.equals",i.conditions.number.equals)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){return+(t=0===t.indexOf("-")?"-"+t.replace(/[^0-9.]/g,""):t.replace(/[^0-9.]/g,""))==+(i=0===i[0].indexOf("-")?"-"+i[0].replace(/[^0-9.]/g,""):i[0].replace(/[^0-9.]/g,""))}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.not",i.conditions.number.not)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){return+(t=0===t.indexOf("-")?"-"+t.replace(/[^0-9.]/g,""):t.replace(/[^0-9.]/g,""))!=+(i=0===i[0].indexOf("-")?"-"+i[0].replace(/[^0-9.]/g,""):i[0].replace(/[^0-9.]/g,""))}},"<":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.lt",i.conditions.number.lt)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+(t=0===t.indexOf("-")?"-"+t.replace(/[^0-9.]/g,""):t.replace(/[^0-9.]/g,""))<+(i=0===i[0].indexOf("-")?"-"+i[0].replace(/[^0-9.]/g,""):i[0].replace(/[^0-9.]/g,""))}},"<=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.lte",i.conditions.number.lte)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+(t=0===t.indexOf("-")?"-"+t.replace(/[^0-9.]/g,""):t.replace(/[^0-9.]/g,""))<=+(i=0===i[0].indexOf("-")?"-"+i[0].replace(/[^0-9.]/g,""):i[0].replace(/[^0-9.]/g,""))}},">=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.gte",i.conditions.number.gte)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+(t=0===t.indexOf("-")?"-"+t.replace(/[^0-9.]/g,""):t.replace(/[^0-9.]/g,""))>=+(i=0===i[0].indexOf("-")?"-"+i[0].replace(/[^0-9.]/g,""):i[0].replace(/[^0-9.]/g,""))}},">":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.gt",i.conditions.number.gt)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+(t=0===t.indexOf("-")?"-"+t.replace(/[^0-9.]/g,""):t.replace(/[^0-9.]/g,""))>+(i=0===i[0].indexOf("-")?"-"+i[0].replace(/[^0-9.]/g,""):i[0].replace(/[^0-9.]/g,""))}},between:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.between",i.conditions.number.between)},init:e.init2Input,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){t=0===t.indexOf("-")?"-"+t.replace(/[^0-9.]/g,""):t.replace(/[^0-9.]/g,"");var e=0===i[0].indexOf("-")?"-"+i[0].replace(/[^0-9.]/g,""):i[0].replace(/[^0-9.]/g,"");return+e<+(i=0===i[1].indexOf("-")?"-"+i[1].replace(/[^0-9.]/g,""):i[1].replace(/[^0-9.]/g,""))?+e<=+t&&+t<=+i:+i<=+t&&+t<=+e}},"!between":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.notBetween",i.conditions.number.notBetween)},init:e.init2Input,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){t=0===t.indexOf("-")?"-"+t.replace(/[^0-9.]/g,""):t.replace(/[^0-9.]/g,"");var e=0===i[0].indexOf("-")?"-"+i[0].replace(/[^0-9.]/g,""):i[0].replace(/[^0-9.]/g,"");return+e<+(i=0===i[1].indexOf("-")?"-"+i[1].replace(/[^0-9.]/g,""):i[1].replace(/[^0-9.]/g,""))?!(+e<=+t&&+t<=+i):!(+i<=+t&&+t<=+e)}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.empty",i.conditions.number.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.notEmpty",i.conditions.number.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return!(null==t||0===t.length)}}},e.stringConditions={"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.equals",i.conditions.string.equals)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){return t===i[0]}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.not",i.conditions.string.not)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidInput,search:function(t,i){return t!==i[0]}},starts:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.startsWith",i.conditions.string.startsWith)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return 0===t.toLowerCase().indexOf(i[0].toLowerCase())}},contains:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.contains",i.conditions.string.contains)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return t.toLowerCase().includes(i[0].toLowerCase())}},ends:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.endsWith",i.conditions.string.endsWith)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return t.toLowerCase().endsWith(i[0].toLowerCase())}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.empty",i.conditions.string.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.notEmpty",i.conditions.string.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return!(null==t||0===t.length)}}},e.arrayConditions={contains:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.array.contains",i.conditions.array.contains)},init:e.initSelectArray,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){return t.includes(i[0])}},without:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.array.without",i.conditions.array.without)},init:e.initSelectArray,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){return-1===t.indexOf(i[0])}},"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.array.equals",i.conditions.array.equals)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){if(t.length===i[0].length){for(var e=0;e<t.length;e++)if(t[e]!==i[0][e])return!1;return!0}return!1}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.array.not",i.conditions.array.not)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){if(t.length===i[0].length){for(var e=0;e<t.length;e++)if(t[e]!==i[0][e])return!0;return!1}return!0}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.array.empty",i.conditions.array.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.array.notEmpty",i.conditions.array.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null!=t&&0!==t.length}}},e.defaults={columns:!0,conditions:{array:e.arrayConditions,date:e.dateConditions,html:e.stringConditions,"html-num":e.numConditions,"html-num-fmt":e.numFmtConditions,luxon:e.luxonDateConditions,moment:e.momentDateConditions,num:e.numConditions,"num-fmt":e.numFmtConditions,string:e.stringConditions},depthLimit:!1,enterSearch:!1,filterChanged:void 0,greyscale:!1,i18n:{add:"Add Condition",button:{0:"Search Builder",_:"Search Builder (%d)"},clearAll:"Clear All",condition:"Condition",data:"Data",deleteTitle:"Delete filtering rule",leftTitle:"Outdent criteria",logicAnd:"And",logicOr:"Or",rightTitle:"Indent criteria",title:{0:"Custom Search Builder",_:"Custom Search Builder (%d)"},value:"Value",valueJoiner:"and"},logic:"AND",orthogonal:{display:"display",search:"filter"},preDefined:!1},e}(),u=function(){function t(i,s,o,r,a,d){if(void 0===r&&(r=0),void 0===a&&(a=!1),void 0===d&&(d=1),!n||!n.versionCheck||!n.versionCheck("1.10.0"))throw Error("SearchBuilder requires DataTables 1.10 or newer");return this.classes=e.extend(!0,{},t.classes),this.c=e.extend(!0,{},t.defaults,s),this.s={criteria:[],depth:d,dt:i,index:r,isChild:a,logic:void 0,opts:s,toDrop:void 0,topGroup:o},this.dom={add:e("<button/>").addClass(this.classes.add).addClass(this.classes.button).attr("type","button"),clear:e("<button>&times</button>").addClass(this.classes.button).addClass(this.classes.clearGroup).attr("type","button"),container:e("<div/>").addClass(this.classes.group),logic:e("<button><div/></button>").addClass(this.classes.logic).addClass(this.classes.button).attr("type","button"),logicContainer:e("<div/>").addClass(this.classes.logicContainer)},void 0===this.s.topGroup&&(this.s.topGroup=this.dom.container),this._setup(),this}return t.prototype.destroy=function(){this.dom.add.off(".dtsb"),this.dom.logic.off(".dtsb"),this.dom.container.trigger("dtsb-destroy").remove(),this.s.criteria=[]},t.prototype.getDetails=function(t){if(void 0===t&&(t=!1),0===this.s.criteria.length)return{};for(var i={criteria:[],logic:this.s.logic},e=0,n=this.s.criteria;e<n.length;e++)i.criteria.push(n[e].criteria.getDetails(t));return i},t.prototype.getNode=function(){return this.dom.container},t.prototype.rebuild=function(t){if(!(void 0===t.criteria||null===t.criteria||Array.isArray(t.criteria)&&0===t.criteria.length)){if(this.s.logic=t.logic,this.dom.logic.children().first().text("OR"===this.s.logic?this.s.dt.i18n("searchBuilder.logicOr",this.c.i18n.logicOr):this.s.dt.i18n("searchBuilder.logicAnd",this.c.i18n.logicAnd)),Array.isArray(t.criteria))for(var i=0,e=t.criteria;i<e.length;i++)void 0!==(t=e[i]).logic?this._addPrevGroup(t):void 0===t.logic&&this._addPrevCriteria(t);for(i=0,e=this.s.criteria;i<e.length;i++)(t=e[i]).criteria instanceof l&&(t.criteria.updateArrows(1<this.s.criteria.length,!1),this._setCriteriaListeners(t.criteria))}},t.prototype.redrawContents=function(){this.dom.container.children().detach(),this.dom.container.append(this.dom.logicContainer).append(this.dom.add),this.s.criteria.sort((function(t,i){return t.criteria.s.index<i.criteria.s.index?-1:t.criteria.s.index>i.criteria.s.index?1:0})),this.setListeners();for(var i=0;i<this.s.criteria.length;i++){var e=this.s.criteria[i].criteria;e instanceof l?(this.s.criteria[i].index=i,this.s.criteria[i].criteria.s.index=i,this.s.criteria[i].criteria.dom.container.insertBefore(this.dom.add),this._setCriteriaListeners(e),this.s.criteria[i].criteria.rebuild(this.s.criteria[i].criteria.getDetails())):e instanceof t&&0<e.s.criteria.length?(this.s.criteria[i].index=i,this.s.criteria[i].criteria.s.index=i,this.s.criteria[i].criteria.dom.container.insertBefore(this.dom.add),e.redrawContents(),this._setGroupListeners(e)):(this.s.criteria.splice(i,1),i--)}this.setupLogic()},t.prototype.redrawLogic=function(){for(var i=0,e=this.s.criteria;i<e.length;i++){var n=e[i];n instanceof t&&n.redrawLogic()}this.setupLogic()},t.prototype.search=function(t,i){return"AND"===this.s.logic?this._andSearch(t,i):"OR"!==this.s.logic||this._orSearch(t,i)},t.prototype.setupLogic=function(){if(this.dom.logicContainer.remove(),this.dom.clear.remove(),1>this.s.criteria.length)this.s.isChild||(this.dom.container.trigger("dtsb-destroy"),this.dom.container.css("margin-left",0));else{var t=this.dom.container.height()-1;this.dom.clear.height("0px"),this.dom.logicContainer.append(this.dom.clear).width(t),this.dom.container.prepend(this.dom.logicContainer),this._setLogicListener(),this.dom.container.css("margin-left",this.dom.logicContainer.outerHeight(!0));var i=(t=this.dom.logicContainer.offset()).left;i=i-(i-this.dom.container.offset().left)-this.dom.logicContainer.outerHeight(!0),this.dom.logicContainer.offset({left:i}),i=this.dom.logicContainer.next(),t=t.top,i=e(i).offset().top,this.dom.logicContainer.offset({top:t-(t-i)}),this.dom.clear.outerHeight(this.dom.logicContainer.height()),this._setClearListener()}},t.prototype.setListeners=function(){var t=this;this.dom.add.unbind("click"),this.dom.add.on("click",(function(){return t.s.isChild||t.dom.container.prepend(t.dom.logicContainer),t.addCriteria(),t.dom.container.trigger("dtsb-add"),t.s.dt.state.save(),!1}));for(var i=0,e=this.s.criteria;i<e.length;i++)e[i].criteria.setListeners();this._setClearListener(),this._setLogicListener()},t.prototype.addCriteria=function(t,i){void 0===t&&(t=null),void 0===i&&(i=!0);var e=null===t?this.s.criteria.length:t.s.index,n=new l(this.s.dt,this.s.opts,this.s.topGroup,e,this.s.depth);null!==t&&(n.c=t.c,n.s=t.s,n.s.depth=this.s.depth,n.classes=t.classes),n.populate(),t=!1;for(var s=0;s<this.s.criteria.length;s++)0===s&&this.s.criteria[s].criteria.s.index>n.s.index?(n.getNode().insertBefore(this.s.criteria[s].criteria.dom.container),t=!0):s<this.s.criteria.length-1&&this.s.criteria[s].criteria.s.index<n.s.index&&this.s.criteria[s+1].criteria.s.index>n.s.index&&(n.getNode().insertAfter(this.s.criteria[s].criteria.dom.container),t=!0);for(t||n.getNode().insertBefore(this.dom.add),this.s.criteria.push({criteria:n,index:e}),this.s.criteria=this.s.criteria.sort((function(t,i){return t.criteria.s.index-i.criteria.s.index})),e=0,t=this.s.criteria;e<t.length;e++)(s=t[e]).criteria instanceof l&&s.criteria.updateArrows(1<this.s.criteria.length,i);this._setCriteriaListeners(n),n.setListeners(),this.setupLogic()},t.prototype.checkFilled=function(){for(var i=0,e=this.s.criteria;i<e.length;i++){var n=e[i];if(n.criteria instanceof l&&n.criteria.s.filled||n.criteria instanceof t&&n.criteria.checkFilled())return!0}return!1},t.prototype.count=function(){for(var i=0,e=0,n=this.s.criteria;e<n.length;e++){var s=n[e];s.criteria instanceof t?i+=s.criteria.count():i++}return i},t.prototype._addPrevGroup=function(i){var e=this.s.criteria.length,n=new t(this.s.dt,this.c,this.s.topGroup,e,!0,this.s.depth+1);this.s.criteria.push({criteria:n,index:e,logic:n.s.logic}),n.rebuild(i),this.s.criteria[e].criteria=n,this.s.topGroup.trigger("dtsb-redrawContents"),this._setGroupListeners(n)},t.prototype._addPrevCriteria=function(t){var i=this.s.criteria.length,e=new l(this.s.dt,this.s.opts,this.s.topGroup,i,this.s.depth);e.populate(),this.s.criteria.push({criteria:e,index:i}),e.rebuild(t),this.s.criteria[i].criteria=e,this.s.topGroup.trigger("dtsb-redrawContents")},t.prototype._andSearch=function(t,i){if(0===this.s.criteria.length)return!0;for(var e=0,n=this.s.criteria;e<n.length;e++){var s=n[e];if(!(s.criteria instanceof l&&!s.criteria.s.filled||s.criteria.search(t,i)))return!1}return!0},t.prototype._orSearch=function(i,e){if(0===this.s.criteria.length)return!0;for(var n=!1,s=0,o=this.s.criteria;s<o.length;s++){var r=o[s];if(r.criteria instanceof l&&r.criteria.s.filled){if(n=!0,r.criteria.search(i,e))return!0}else if(r.criteria instanceof t&&r.criteria.checkFilled()&&(n=!0,r.criteria.search(i,e)))return!0}return!n},t.prototype._removeCriteria=function(i,e){if(void 0===e&&(e=!1),1>=this.s.criteria.length&&this.s.isChild)this.destroy();else{for(var n=void 0,s=0;s<this.s.criteria.length;s++)this.s.criteria[s].index===i.s.index&&(!e||this.s.criteria[s].criteria instanceof t)&&(n=s);for(void 0!==n&&this.s.criteria.splice(n,1),s=0;s<this.s.criteria.length;s++)this.s.criteria[s].index=s,this.s.criteria[s].criteria.s.index=s}},t.prototype._setCriteriaListeners=function(i){var e=this;i.dom.delete.unbind("click").on("click",(function(){e._removeCriteria(i),i.dom.container.remove();for(var t=0,n=e.s.criteria;t<n.length;t++){var s=n[t];s.criteria instanceof l&&s.criteria.updateArrows(1<e.s.criteria.length)}return i.destroy(),e.s.dt.draw(),e.s.topGroup.trigger("dtsb-redrawContents"),e.s.topGroup.trigger("dtsb-updateTitle"),!1})),i.dom.right.unbind("click").on("click",(function(){var n=i.s.index,s=new t(e.s.dt,e.s.opts,e.s.topGroup,i.s.index,!0,e.s.depth+1);return s.addCriteria(i),e.s.criteria[n].criteria=s,e.s.criteria[n].logic="AND",e.s.topGroup.trigger("dtsb-redrawContents"),e._setGroupListeners(s),!1})),i.dom.left.unbind("click").on("click",(function(){e.s.toDrop=new l(e.s.dt,e.s.opts,e.s.topGroup,i.s.index),e.s.toDrop.s=i.s,e.s.toDrop.c=i.c,e.s.toDrop.classes=i.classes,e.s.toDrop.populate();var t=e.s.toDrop.s.index;return e.dom.container.trigger("dtsb-dropCriteria"),i.s.index=t,e._removeCriteria(i),e.s.topGroup.trigger("dtsb-redrawContents"),e.s.dt.draw(),!1}))},t.prototype._setClearListener=function(){var t=this;this.dom.clear.unbind("click").on("click",(function(){return t.s.isChild?(t.destroy(),t.s.topGroup.trigger("dtsb-updateTitle"),t.s.topGroup.trigger("dtsb-redrawContents"),!1):(t.dom.container.trigger("dtsb-clearContents"),!1)}))},t.prototype._setGroupListeners=function(t){var i=this;t.dom.add.unbind("click").on("click",(function(){return i.setupLogic(),i.dom.container.trigger("dtsb-add"),!1})),t.dom.container.unbind("dtsb-add").on("dtsb-add",(function(){return i.setupLogic(),i.dom.container.trigger("dtsb-add"),!1})),t.dom.container.unbind("dtsb-destroy").on("dtsb-destroy",(function(){return i._removeCriteria(t,!0),t.dom.container.remove(),i.setupLogic(),!1})),t.dom.container.unbind("dtsb-dropCriteria").on("dtsb-dropCriteria",(function(){var e=t.s.toDrop;return e.s.index=t.s.index,e.updateArrows(1<i.s.criteria.length,!1),i.addCriteria(e,!1),!1})),t.setListeners()},t.prototype._setup=function(){this.setListeners(),this.dom.add.text(this.s.dt.i18n("searchBuilder.add",this.c.i18n.add)),this.dom.logic.children().first().text("OR"===this.c.logic?this.s.dt.i18n("searchBuilder.logicOr",this.c.i18n.logicOr):this.s.dt.i18n("searchBuilder.logicAnd",this.c.i18n.logicAnd)),this.s.logic="OR"===this.c.logic?"OR":"AND",this.c.greyscale&&this.dom.logic.addClass(this.classes.greyscale),this.dom.logicContainer.append(this.dom.logic).append(this.dom.clear),this.s.isChild&&this.dom.container.append(this.dom.logicContainer),this.dom.container.append(this.dom.add)},t.prototype._setLogicListener=function(){var t=this;this.dom.logic.unbind("click").on("click",(function(){t._toggleLogic(),t.s.dt.draw();for(var i=0,e=t.s.criteria;i<e.length;i++)e[i].criteria.setListeners()}))},t.prototype._toggleLogic=function(){"OR"===this.s.logic?(this.s.logic="AND",this.dom.logic.children().first().text(this.s.dt.i18n("searchBuilder.logicAnd",this.c.i18n.logicAnd))):"AND"===this.s.logic&&(this.s.logic="OR",this.dom.logic.children().first().text(this.s.dt.i18n("searchBuilder.logicOr",this.c.i18n.logicOr)))},t.version="1.1.0",t.classes={add:"dtsb-add",button:"dtsb-button",clearGroup:"dtsb-clearGroup",greyscale:"dtsb-greyscale",group:"dtsb-group",inputButton:"dtsb-iptbtn",logic:"dtsb-logic",logicContainer:"dtsb-logicContainer"},t.defaults={columns:!0,conditions:{date:l.dateConditions,html:l.stringConditions,"html-num":l.numConditions,"html-num-fmt":l.numFmtConditions,luxon:l.luxonDateConditions,moment:l.momentDateConditions,num:l.numConditions,"num-fmt":l.numFmtConditions,string:l.stringConditions},depthLimit:!1,enterSearch:!1,filterChanged:void 0,greyscale:!1,i18n:{add:"Add Condition",button:{0:"Search Builder",_:"Search Builder (%d)"},clearAll:"Clear All",condition:"Condition",data:"Data",deleteTitle:"Delete filtering rule",leftTitle:"Outdent criteria",logicAnd:"And",logicOr:"Or",rightTitle:"Indent criteria",title:{0:"Custom Search Builder",_:"Custom Search Builder (%d)"},value:"Value",valueJoiner:"and"},logic:"AND",orthogonal:{display:"display",search:"filter"},preDefined:!1},t}(),c=function(){function t(i,e){var n=this;if(!o||!o.versionCheck||!o.versionCheck("1.10.0"))throw Error("SearchBuilder requires DataTables 1.10 or newer");if(i=new o.Api(i),this.classes=s.extend(!0,{},t.classes),this.c=s.extend(!0,{},t.defaults,e),this.dom={clearAll:s('<button type="button">'+i.i18n("searchBuilder.clearAll",this.c.i18n.clearAll)+"</button>").addClass(this.classes.clearAll).addClass(this.classes.button).attr("type","button"),container:s("<div/>").addClass(this.classes.container),title:s("<div/>").addClass(this.classes.title),titleRow:s("<div/>").addClass(this.classes.titleRow),topGroup:void 0},this.s={dt:i,opts:e,search:void 0,topGroup:void 0},void 0===i.settings()[0]._searchBuilder)return i.settings()[0]._searchBuilder=this,this.s.dt.settings()[0]._bInitComplete?this._setUp():i.one("init.dt",(function(){n._setUp()})),this}return t.prototype.getDetails=function(t){return void 0===t&&(t=!1),this.s.topGroup.getDetails(t)},t.prototype.getNode=function(){return this.dom.container},t.prototype.rebuild=function(t){return this.dom.clearAll.click(),null==t||(this.s.topGroup.rebuild(t),this.s.dt.draw(!1),this.s.topGroup.setListeners()),this},t.prototype._applyPreDefDefaults=function(t){var i=this;void 0!==t.criteria&&void 0===t.logic&&(t.logic="AND");for(var e=function(t){void 0!==t.criteria?t=n._applyPreDefDefaults(t):n.s.dt.columns().every((function(e){i.s.dt.settings()[0].aoColumns[e].sTitle===t.data&&(t.dataIdx=e)}))},n=this,s=0,o=t.criteria;s<o.length;s++)e(o[s]);return t},t.prototype._setUp=function(t){var i=this;if(void 0===t&&(t=!0),s.fn.DataTable.Api.registerPlural("columns().type()","column().type()",(function(t,i){return this.iterator("column",(function(t,i){return t.aoColumns[i].sType}),1)})),!o.DateTime){var e=this.s.dt.columns().type().toArray();if(void 0===e||e.includes(void 0)||e.includes(null)){e=[];for(var n=0,r=this.s.dt.settings()[0].aoColumns;n<r.length;n++){var a=r[n];e.push(void 0!==a.searchBuilderType?a.searchBuilderType:a.sType)}}for(n=this.s.dt.columns().toArray(),(void 0===e||e.includes(void 0)||e.includes(null))&&(s.fn.dataTable.ext.oApi._fnColumnTypes(this.s.dt.settings()[0]),e=this.s.dt.columns().type().toArray()),r=0;r<n[0].length;r++)if(a=e[n[0][r]],(!0===this.c.columns||Array.isArray(this.c.columns)&&this.c.columns.includes(r))&&(a.includes("date")||a.includes("moment")||a.includes("luxon")))throw alert("SearchBuilder Requires DateTime when used with dates."),Error("SearchBuilder requires DateTime")}this.s.topGroup=new u(this.s.dt,this.c,void 0),this._setClearListener(),this.s.dt.on("stateSaveParams",(function(t,e,n){n.searchBuilder=i.getDetails(),n.page=i.s.dt.page()})),this._build(),this.s.dt.on("preXhr",(function(t,e,n){i.s.dt.page.info().serverSide&&(n.searchBuilder=i._collapseArray(i.getDetails(!0)))})),t&&(null!==(t=this.s.dt.state.loaded())&&void 0!==t.searchBuilder?(this.s.topGroup.rebuild(t.searchBuilder),this.s.topGroup.dom.container.trigger("dtsb-redrawContents"),this.s.dt.page(t.page).draw("page"),this.s.topGroup.setListeners()):!1!==this.c.preDefined&&(this.c.preDefined=this._applyPreDefDefaults(this.c.preDefined),this.rebuild(this.c.preDefined))),this._setEmptyListener(),this.s.dt.state.save()},t.prototype._collapseArray=function(t){if(void 0===t.logic)void 0!==t.value&&(t.value.sort((function(t,i){return isNaN(+t)||(t=+t,i=+i),t<i?-1:i<t?1:0})),t.value1=t.value[0],t.value2=t.value[1]);else for(var i=0;i<t.criteria.length;i++)t.criteria[i]=this._collapseArray(t.criteria[i]);return t},t.prototype._updateTitle=function(t){this.dom.title.html(this.s.dt.i18n("searchBuilder.title",this.c.i18n.title,t))},t.prototype._build=function(){var t=this;this.dom.clearAll.remove(),this.dom.container.empty();var i=this.s.topGroup.count();this._updateTitle(i),this.dom.titleRow.append(this.dom.title),this.dom.container.append(this.dom.titleRow),this.dom.topGroup=this.s.topGroup.getNode(),this.dom.container.append(this.dom.topGroup),this._setRedrawListener();var e=this.s.dt.table(0).node();s.fn.dataTable.ext.search.includes(this.s.search)||(this.s.search=function(i,n,s,o){return i.nTable!==e||t.s.topGroup.search(n,s)},s.fn.dataTable.ext.search.push(this.s.search)),this.s.dt.on("destroy.dt",(function(){t.dom.container.remove(),t.dom.clearAll.remove();for(var i=s.fn.dataTable.ext.search.indexOf(t.s.search);-1!==i;)s.fn.dataTable.ext.search.splice(i,1),i=s.fn.dataTable.ext.search.indexOf(t.s.search)}))},t.prototype._checkClear=function(){0<this.s.topGroup.s.criteria.length?(this.dom.clearAll.insertAfter(this.dom.title),this._setClearListener()):this.dom.clearAll.remove()},t.prototype._filterChanged=function(t){var i=this.c.filterChanged;"function"==typeof i&&i(t,this.s.dt.i18n("searchBuilder.button",this.c.i18n.button,t))},t.prototype._setClearListener=function(){var t=this;this.dom.clearAll.unbind("click"),this.dom.clearAll.on("click",(function(){return t.s.topGroup=new u(t.s.dt,t.c,void 0),t._build(),t.s.dt.draw(),t.s.topGroup.setListeners(),t.dom.clearAll.remove(),t._setEmptyListener(),t._filterChanged(0),!1}))},t.prototype._setRedrawListener=function(){var t=this;this.s.topGroup.dom.container.unbind("dtsb-redrawContents"),this.s.topGroup.dom.container.on("dtsb-redrawContents",(function(){t._checkClear(),t.s.topGroup.redrawContents(),t.s.topGroup.setupLogic(),t._setEmptyListener();var i=t.s.topGroup.count();t._updateTitle(i),t._filterChanged(i),t.s.dt.draw(),t.s.dt.state.save()})),this.s.topGroup.dom.container.unbind("dtsb-redrawLogic"),this.s.topGroup.dom.container.on("dtsb-redrawLogic",(function(){t.s.topGroup.redrawLogic();var i=t.s.topGroup.count();t._updateTitle(i),t._filterChanged(i)})),this.s.topGroup.dom.container.unbind("dtsb-add"),this.s.topGroup.dom.container.on("dtsb-add",(function(){var i=t.s.topGroup.count();t._updateTitle(i),t._filterChanged(i)})),this.s.dt.on("postEdit postCreate postRemove",(function(){t.s.topGroup.redrawContents()})),this.s.topGroup.dom.container.unbind("dtsb-clearContents"),this.s.topGroup.dom.container.on("dtsb-clearContents",(function(){t._setUp(!1),t._filterChanged(0),t.s.dt.draw()})),this.s.topGroup.dom.container.on("dtsb-updateTitle",(function(){var i=t.s.topGroup.count();t._updateTitle(i),t._filterChanged(i)}))},t.prototype._setEmptyListener=function(){var t=this;this.s.topGroup.dom.add.on("click",(function(){t._checkClear()})),this.s.topGroup.dom.container.on("dtsb-destroy",(function(){t.dom.clearAll.remove()}))},t.version="1.2.1",t.classes={button:"dtsb-button",clearAll:"dtsb-clearAll",container:"dtsb-searchBuilder",inputButton:"dtsb-iptbtn",title:"dtsb-title",titleRow:"dtsb-titleRow"},t.defaults={columns:!0,conditions:{date:l.dateConditions,html:l.stringConditions,"html-num":l.numConditions,"html-num-fmt":l.numFmtConditions,luxon:l.luxonDateConditions,moment:l.momentDateConditions,num:l.numConditions,"num-fmt":l.numFmtConditions,string:l.stringConditions},depthLimit:!1,enterSearch:!1,filterChanged:void 0,greyscale:!1,i18n:{add:"Add Condition",button:{0:"Search Builder",_:"Search Builder (%d)"},clearAll:"Clear All",condition:"Condition",conditions:{array:{contains:"Contains",empty:"Empty",equals:"Equals",not:"Not",notEmpty:"Not Empty",without:"Without"},date:{after:"After",before:"Before",between:"Between",empty:"Empty",equals:"Equals",not:"Not",notBetween:"Not Between",notEmpty:"Not Empty"},number:{between:"Between",empty:"Empty",equals:"Equals",gt:"Greater Than",gte:"Greater Than Equal To",lt:"Less Than",lte:"Less Than Equal To",not:"Not",notBetween:"Not Between",notEmpty:"Not Empty"},string:{contains:"Contains",empty:"Empty",endsWith:"Ends With",equals:"Equals",not:"Not",notEmpty:"Not Empty",startsWith:"Starts With"}},data:"Data",deleteTitle:"Delete filtering rule",leftTitle:"Outdent criteria",logicAnd:"And",logicOr:"Or",rightTitle:"Indent criteria",title:{0:"Custom Search Builder",_:"Custom Search Builder (%d)"},value:"Value",valueJoiner:"and"},logic:"AND",orthogonal:{display:"display",search:"filter"},preDefined:!1},t}();r=function(r,a,d){function h(t,i){return t=new p.Api(t),i=i||t.init().searchBuilder||p.defaults.searchBuilder,new c(t,i).getNode()}!function(t){s=t,o=t.fn.DataTable}(r),function(t){e=t,n=t.fn.dataTable}(r),function(e){t=e,i=e.fn.dataTable}(r);var p=r.fn.dataTable;r.fn.dataTable.SearchBuilder=c,r.fn.DataTable.SearchBuilder=c,r.fn.dataTable.Group=u,r.fn.DataTable.Group=u,r.fn.dataTable.Criteria=l,r.fn.DataTable.Criteria=l,a=r.fn.dataTable.Api.register,r.fn.dataTable.ext.searchBuilder={conditions:{}},r.fn.dataTable.ext.buttons.searchBuilder={action:function(t,i,e,n){this.popover(n._searchBuilder.getNode(),{align:"dt-container"}),void 0!==n._searchBuilder.s.topGroup&&n._searchBuilder.s.topGroup.dom.container.trigger("dtsb-redrawContents")},config:{},init:function(t,i,e){var n=new r.fn.dataTable.SearchBuilder(t,r.extend({filterChanged:function(e,n){t.button(i).text(n)}},e.config));t.button(i).text(e.text||t.i18n("searchBuilder.button",n.c.i18n.button,0)),e._searchBuilder=n},text:null},a("searchBuilder.getDetails()",(function(t){void 0===t&&(t=!1);var i=this.context[0];return i._searchBuilder?i._searchBuilder.getDetails(t):null})),a("searchBuilder.rebuild()",(function(t){var i=this.context[0];return void 0===i._searchBuilder?null:(i._searchBuilder.rebuild(t),this)})),a("searchBuilder.container()",(function(){var t=this.context[0];return t._searchBuilder?t._searchBuilder.getNode():null})),r(d).on("preInit.dt.dtsp",(function(t,i,e){"dt"===t.namespace&&(i.oInit.searchBuilder||p.defaults.searchBuilder)&&(i._searchBuilder||h(i))})),p.ext.feature.push({cFeature:"Q",fnInit:h}),p.ext.features&&p.ext.features.register("searchBuilder",h)},"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(t){return r(t,window,document)})):"object"==typeof exports?module.exports=function(t,i){return t||(t=window),i&&i.fn.dataTable||(i=require("datatables.net")(t,i).$),r(i,t,t.document)}:r(window.jQuery,window,document)}();
